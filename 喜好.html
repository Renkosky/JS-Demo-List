<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    function lowerBound(list, left, right, v) {
      let middle;
      while (list[left].value < list[right].value) {
        // 取中值
        middle = Math.floor(left + (right - left) / 2);
        if (v <= list[middle].value) {
          right = middle;
        } else {
          left = middle + 1;
        }
      }
      return left;
    }

    //上界
    function upperBound(list, left, right, v) {
      let middle;
      while (list[left].value < list[right].value) {
        // 取中值
        middle = left + Math.ceil((right - left) / 2)
        if (v >= list[middle].value) {
          left = middle;
        } else {
          right = middle - 1;
        }
      }
      return left;
    }

    function cmp(property) {
      return function (a, b) {
        var value1 = a[property];
        var value2 = b[property];
        return value1 - value2;
      }
    }

    var n = 5
    var list = [1, 2, 3, 3, 5]
    var l = 3
    var b = ['1 2 1', '2 4 5', '3 5 3']
    list = list.map((item, index) => {
      return {
        value: item,
        key: index + 1
      }
    })

    list = list.sort(cmp('value'))

    for (i = 0; i < l; i++) {
      var arr = b[i].split(' ')
      var start = lowerBound(list, 0, n - 1, arr[2])
      var end = upperBound(list, 0, n - 1, arr[2])
      var g = 0
      for (let j = start; j <= end; j++) {
        if (list[j].key <= arr[1] && list[j].key >= arr[0]) {
          g++
        }
      }
      console.log(g);
    }


    // var n = 6
    // var v = 2
    // var list = [1, 3, 2, 3, 6, 4, 3, 5, 7, 8, 3]
    // list = list.map((item, index) => {
    //   return {
    //     value: item,
    //     key: index + 1
    //   }
    // })
    // function cmp(property) {
    //   return function (a, b) {
    //     var value1 = a[property];
    //     var value2 = b[property];
    //     return value1 - value2;
    //   }
    // }
    // list = list.sort(cmp('value'))
    // console.log(list);
    // //下界
    // function lowerBound(list, left, right, v) {
    //   let middle;
    //   while (list[left].value < list[right].value) {
    //     // 取中值
    //     middle = Math.floor(left + (right - left) / 2);
    //     if (v <= list[middle].value) {
    //       right = middle;
    //     } else {
    //       left = middle + 1;
    //     }
    //   }
    //   return left;
    // }

    // //上界
    // function upperBound(list, left, right, v) {
    //   let middle;
    //   while (list[left].value < list[right].value) {
    //     // 取中值
    //     middle = left + Math.ceil((right - left) / 2)
    //     if (v >= list[middle].value) {
    //       left = middle;
    //     } else {
    //       right = middle - 1;
    //     }
    //   }
    //   return left;
    // }
    // var start = lowerBound(list, 0, n, 3)
    // var end = upperBound(list, 0, n, 3)
    // console.log(list[lowerBound(list, 0, n, 3)])
    // console.log(list[upperBound(list, 0, n, 3)])
    // var g = 0
    // for (i = start; i <= end; i++) {
    //   if (list[i].key <= 5 && list[i].key >= 1) {
    //     g++
    //   }
    // }
    // console.log(g);

  </script>
</body>

</html>